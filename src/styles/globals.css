@tailwind base;
@tailwind components;
@tailwind utilities;

html {
  scroll-behavior: smooth;
}

body {
  /* 确保body不会产生额外的滚动条 */
  overflow-x: hidden;
}

h1,
h2,
h3,
h4 {
  font-family: var(--incognito), "Inter", sans-serif;
}

.path {
  stroke-dasharray: 500px 100px;
  animation: animate 100s linear infinite alternate-reverse;
}

@keyframes animate {
  from {
    stroke-dashoffset: 0;
  }
  to {
    stroke-dashoffset: 12433.8193359375;
  }
}

ul,
ol {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

a {
  color: inherit;
  text-decoration: none;
}

.highlight-text {
  @apply dark:text-sky-400 text-sky-600 font-semibold;
}

#main-content {
  transition: transform 0.5s ease;
  transform-origin: left center;
  transform: rotateY(0deg);
  transform-style: preserve-3d;
  backface-visibility: hidden;
  height: 100vh;
  overflow: auto;
  /* 移动端优化 */
  -webkit-overflow-scrolling: touch;
}

#main-content.active {
  transform: rotateY(46deg);
}

#root {
  perspective: 1000px;
  height: 100vh;
  overflow: hidden;
  position: relative;
}

/* 移动端滚动优化 */
@media (max-width: 768px) {
  /* 防止body产生滚动条 */
  html, body {
    overflow-x: hidden;
    height: 100%;
  }
  
  #root {
    height: 100vh;
    height: -webkit-fill-available; /* iOS Safari 兼容 */
    overflow: hidden;
    position: relative;
  }
  
  #main-content {
    height: 100vh;
    height: -webkit-fill-available; /* iOS Safari 兼容 */
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    /* 确保这是唯一的滚动容器 */
    position: relative;
  }
  
  /* 防止其他容器产生额外的滚动条 */
  main {
    overflow: visible;
  }
  
  /* 特别处理可能导致水平滚动的容器 */
  .max-w-7xl, .max-w-6xl, .max-w-4xl, .max-w-2xl {
    max-width: calc(100vw - 2rem);
  }
}

@media print {
  html, body {
    font-size: 12px !important;
    color: black !important;
    background-color: white !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  a {
    color: #333 !important;
    text-decoration: none !important;
  }
  @page {
    margin: 0.5cm !important;
    size: A4 !important;
  }
  /* 确保打印时内容不会被截断 */
  * {
    -webkit-print-color-adjust: exact !important;
    color-adjust: exact !important;
  }
  /* 防止页面内容被截断 */
  .print-resume-container {
    page-break-inside: avoid !important;
  }
  /* 优化分页设置，允许更灵活的分页 */
  section {
    page-break-inside: auto !important;
  }
  /* 只在必要时避免分页 */
  .avoid-break {
    page-break-inside: avoid !important;
  }
  /* 优化打印时的容器高度 */
  .print-resume-container {
    min-height: auto !important;
    height: auto !important;
  }
  /* 减少打印时的间距 */
  .print-resume-container section {
    margin-bottom: 0.5rem !important;
  }
  .print-resume-container h2 {
    margin-bottom: 0.25rem !important;
  }
  .print-resume-container .mb-6 {
    margin-bottom: 0.5rem !important;
  }
  .print-resume-container .mb-5 {
    margin-bottom: 0.4rem !important;
  }
  /* 确保打印时没有固定高度限制 */
  .min-h-screen {
    min-height: auto !important;
  }
  /* 移除打印时的最大宽度限制 */
  .max-w-4xl {
    max-width: none !important;
  }
  /* Chrome浏览器打印优化 */
  @-webkit-keyframes print-break {
    from { page-break-before: auto; }
    to { page-break-before: always; }
  }
  /* 确保打印时body和html没有固定高度 */
  html, body {
    height: auto !important;
    min-height: auto !important;
    overflow: visible !important;
  }
  /* 移除所有可能的overflow限制 */
  * {
    overflow: visible !important;
  }
  /* 特别处理可能影响打印的容器 */
  #root, #main-content {
    height: auto !important;
    min-height: auto !important;
    overflow: visible !important;
    position: static !important;
  }
  /* 控制分页行为，避免不必要的空白 */
  .print-resume-container > div {
    page-break-inside: auto !important;
  }
  /* 允许在section之间分页，但避免在section内部分页 */
  .print-resume-container section {
    page-break-inside: auto !important;
    page-break-after: auto !important;
  }
  /* 确保列表项不会被分页截断 */
  .print-resume-container li {
    page-break-inside: avoid !important;
  }
}
